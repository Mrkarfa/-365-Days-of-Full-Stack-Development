<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Order Confirmed - ElectroMart</title>
    <meta name="description" content="Your order has been confirmed" />
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <link rel="stylesheet" href="../css/styles.css" />
    <script>
      tailwind.config = {
        theme: {
          extend: {
            fontFamily: {
              sans: [
                "-apple-system",
                "BlinkMacSystemFont",
                "Segoe UI",
                "system-ui",
                "sans-serif",
              ],
            },
            colors: {
              dark: {
                primary: "#0a0a0a",
                secondary: "#141414",
                card: "#1a1a1a",
                hover: "#222222",
                border: "#2a2a2a",
              },
            },
          },
        },
      };
    </script>
  </head>
  <body class="bg-dark-primary text-white min-h-screen">
    <!-- Header -->
    <header class="fixed top-0 left-0 right-0 z-50 glass">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex items-center justify-between h-16">
          <a href="../index.html" class="flex items-center gap-2">
            <i data-lucide="zap" class="w-8 h-8 text-blue-500"></i>
            <span class="text-xl font-bold">ElectroMart</span>
          </a>
        </div>
      </div>
    </header>

    <main class="pt-24 pb-16 flex items-center justify-center min-h-screen">
      <div class="max-w-2xl mx-auto px-4 text-center">
        <!-- Order Steps (All Complete) -->
        <div class="order-steps mb-12">
          <div class="step completed">
            <div class="step-number">
              <i data-lucide="check" class="w-4 h-4"></i>
            </div>
          </div>
          <div class="w-12 h-0.5 bg-green-500"></div>
          <div class="step completed">
            <div class="step-number">
              <i data-lucide="check" class="w-4 h-4"></i>
            </div>
          </div>
          <div class="w-12 h-0.5 bg-green-500"></div>
          <div class="step completed">
            <div class="step-number">
              <i data-lucide="check" class="w-4 h-4"></i>
            </div>
          </div>
          <div class="w-12 h-0.5 bg-green-500"></div>
          <div class="step completed">
            <div class="step-number">
              <i data-lucide="check" class="w-4 h-4"></i>
            </div>
          </div>
        </div>

        <!-- Success Icon -->
        <div class="success-checkmark mx-auto mb-8">
          <i data-lucide="check" class="w-10 h-10 text-white"></i>
        </div>

        <!-- Success Content -->
        <div class="success-content">
          <h1 class="text-4xl font-bold mb-4">Order Confirmed!</h1>
          <p class="text-xl text-gray-400 mb-8">
            Thank you for your purchase. Your order has been placed
            successfully.
          </p>

          <!-- Order Details Card -->
          <div
            class="bg-dark-card rounded-xl p-8 border border-dark-border mb-8 text-left"
          >
            <div class="grid md:grid-cols-2 gap-6">
              <div>
                <p class="text-gray-400 text-sm mb-1">Order Number</p>
                <p class="text-xl font-bold text-blue-400" id="orderId">-</p>
              </div>
              <div>
                <p class="text-gray-400 text-sm mb-1">Order Date</p>
                <p class="font-semibold" id="orderDate">-</p>
              </div>
              <div>
                <p class="text-gray-400 text-sm mb-1">Estimated Delivery</p>
                <p class="font-semibold text-green-400" id="deliveryDate">-</p>
              </div>
              <div>
                <p class="text-gray-400 text-sm mb-1">Total Amount</p>
                <p class="text-xl font-bold" id="orderTotal">-</p>
              </div>
            </div>

            <div class="border-t border-dark-border mt-6 pt-6">
              <p class="text-gray-400 text-sm mb-3">Order Items</p>
              <div id="orderItems" class="space-y-3"></div>
            </div>
          </div>

          <!-- Actions -->
          <div class="flex flex-col sm:flex-row gap-4 justify-center">
            <a href="../index.html" class="btn btn-primary px-8 py-4">
              <i data-lucide="shopping-bag" class="w-5 h-5"></i>
              Continue Shopping
            </a>
            <button
              onclick="window.print()"
              class="btn btn-secondary px-8 py-4"
            >
              <i data-lucide="printer" class="w-5 h-5"></i>
              Print Receipt
            </button>
          </div>

          <!-- Email Notice -->
          <p class="text-gray-500 text-sm mt-8">
            <i data-lucide="mail" class="w-4 h-4 inline mr-1"></i>
            A confirmation email has been sent to your registered email address.
          </p>
        </div>
      </div>
    </main>

    <script src="../js/products.js"></script>
    <script src="../js/cart.js"></script>
    <script src="../js/animations.js"></script>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        // Get last order from localStorage
        const lastOrder = JSON.parse(
          localStorage.getItem("electromart_lastOrder") || "{}"
        );

        if (!lastOrder.orderId) {
          // No order found, redirect to home
          document.getElementById("orderId").textContent =
            "EM" + Date.now().toString(36).toUpperCase();
          document.getElementById("orderDate").textContent =
            new Date().toLocaleDateString("en-US", {
              year: "numeric",
              month: "long",
              day: "numeric",
            });

          const deliveryDate = new Date();
          deliveryDate.setDate(deliveryDate.getDate() + 5);
          document.getElementById("deliveryDate").textContent =
            deliveryDate.toLocaleDateString("en-US", {
              weekday: "long",
              month: "long",
              day: "numeric",
            });
          document.getElementById("orderTotal").textContent = "$0.00";
          document.getElementById("orderItems").innerHTML =
            '<p class="text-gray-500">No items</p>';
        } else {
          // Display order details
          document.getElementById("orderId").textContent = lastOrder.orderId;
          document.getElementById("orderDate").textContent = new Date(
            lastOrder.date
          ).toLocaleDateString("en-US", {
            year: "numeric",
            month: "long",
            day: "numeric",
          });

          const deliveryDate = new Date(lastOrder.date);
          deliveryDate.setDate(deliveryDate.getDate() + 5);
          document.getElementById("deliveryDate").textContent =
            deliveryDate.toLocaleDateString("en-US", {
              weekday: "long",
              month: "long",
              day: "numeric",
            });

          document.getElementById("orderTotal").textContent = formatPrice(
            lastOrder.total
          );

          // Display order items
          if (lastOrder.items && lastOrder.items.length > 0) {
            document.getElementById("orderItems").innerHTML = lastOrder.items
              .map(
                (item) => `
                        <div class="flex items-center gap-3">
                            <img src="../${item.product.image}" alt="${
                  item.product.name
                }" 
                                 class="w-12 h-12 object-cover rounded-lg"
                                 onerror="this.src='https://placehold.co/48x48/1a1a1a/666?text=Item'">
                            <div class="flex-1">
                                <p class="font-medium">${item.product.name}</p>
                                <p class="text-sm text-gray-400">Qty: ${
                                  item.quantity
                                }</p>
                            </div>
                            <p class="font-semibold">${formatPrice(
                              item.product.price * item.quantity
                            )}</p>
                        </div>
                    `
              )
              .join("");
          }

          // Clear the stored order
          localStorage.removeItem("electromart_lastOrder");
        }

        lucide.createIcons();

        // Trigger success animation
        if (typeof animateSuccess === "function") {
          animateSuccess();
        }
      });
    </script>
  </body>
</html>
